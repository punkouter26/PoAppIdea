@using Radzen
@using Radzen.Blazor

<RadzenCard class="@($"preference-card {GetStrengthClass()}")" Style="padding: 1rem;">
    <RadzenStack Gap="0.5rem">
        <RadzenStack Orientation="Orientation.Horizontal" JustifyContent="JustifyContent.SpaceBetween">
            <RadzenText TextStyle="TextStyle.Subtitle1" class="chart-theme">@Theme</RadzenText>
            <RadzenBadge Text="@Category" Variant="Variant.Outlined" />
        </RadzenStack>
        <RadzenProgressBar Value="@GetStrengthPercent()" Max="100" ShowValue="true" 
                           Style="height: 24px;" ProgressBarStyle="@GetProgressBarStyle()" />
    </RadzenStack>
</RadzenCard>

@code {
    [Parameter]
    public string Theme { get; set; } = "";

    [Parameter]
    public float Strength { get; set; }

    [Parameter]
    public string Category { get; set; } = "";

    private string GetStrengthClass()
    {
        return Strength switch
        {
            >= 0.6f => "strong",
            >= 0.3f => "moderate",
            >= 0 => "weak",
            _ => "negative"
        };
    }

    private ProgressBarStyle GetProgressBarStyle()
    {
        return Strength switch
        {
            >= 0.6f => ProgressBarStyle.Success,
            >= 0.3f => ProgressBarStyle.Info,
            >= 0 => ProgressBarStyle.Secondary,
            _ => ProgressBarStyle.Danger
        };
    }

    private double GetStrengthPercent()
    {
        return Math.Abs(Strength) * 100;
    }
}
